# Tasks_241217.md

### 관련 파일

- `src/lib/supabaseClient.ts` - Supabase 클라이언트 설정
- `docs/sql/supabase-schema-extension.sql` - 확장된 데이터베이스 스키마 (신규)
- `src/types/index.ts` - 타입 정의 확장
- `src/app/api/auth/[...nextauth]/route.ts` - NextAuth 인증 라우트 (신규)
- `src/lib/auth.ts` - 인증 헬퍼 함수 (신규)
- `src/components/LoginModal.tsx` - 로그인 모달 컴포넌트 (신규)
- `src/components/SignupModal.tsx` - 회원가입 모달 컴포넌트 (신규)
- `src/app/api/users/activity/route.ts` - 사용자 활동 추적 API (신규)
- `src/app/api/users/grade/route.ts` - 사용자 등급 계산 API (신규)
- `src/app/api/apis/submit/route.ts` - API 등록 제출 API (신규)
- `src/app/api/apis/approve/route.ts` - 관리자 승인 API (신규)
- `src/app/api/admin/pending-apis/route.ts` - 대기중인 API 목록 조회 (신규)
- `src/app/admin/page.tsx` - 관리자 페이지 (신규)
- `src/app/api/boards/route.ts` - 게시판 CRUD API (신규)
- `src/app/boards/page.tsx` - 게시판 목록 페이지 (신규)
- `src/app/boards/[type]/page.tsx` - 게시판 타입별 페이지 (신규)
- `src/app/boards/[type]/[id]/page.tsx` - 게시글 상세 페이지 (신규)
- `src/components/FeedbackModal.tsx` - 피드백 모달 컴포넌트 (신규)
- `src/app/api/feedback/route.ts` - 피드백 저장 API (신규)
- `src/app/api/wiki/edit/route.ts` - 위키 수정 API (신규)
- `src/components/WikiEditor.tsx` - 위키 에디터 개선 (수정)
- `src/hooks/useAuth.ts` - 인증 상태 관리 훅 (신규)
- `src/middleware.ts` - 인증 미들웨어 (신규)
- `src/lib/permissions.ts` - 권한 체크 유틸리티 (신규)

## 작업

- [x] 1.0 사용자 인증 시스템 구현 (Push 단위)
  - [x] 1.1 NextAuth.js 설치 및 기본 설정 (커밋 단위)
    - [ ] 1.1.1 테스트 코드 작성
    - [ ] 1.1.2 테스트 실행 및 검증
    - [ ] 1.1.3 오류 수정 (필요 시)
  - [x] 1.2 이메일/비밀번호 인증 프로바이더 설정 (커밋 단위)
    - [ ] 1.2.1 테스트 코드 작성
    - [ ] 1.2.2 테스트 실행 및 검증
    - [ ] 1.2.3 오류 수정 (필요 시)
  - [x] 1.3 로그인 모달 컴포넌트 구현 (커밋 단위)
    - [ ] 1.3.1 테스트 코드 작성
    - [ ] 1.3.2 테스트 실행 및 검증
    - [ ] 1.3.3 오류 수정 (필요 시)
  - [x] 1.4 회원가입 모달 컴포넌트 구현 (커밋 단위)
    - [ ] 1.4.1 테스트 코드 작성
    - [ ] 1.4.2 테스트 실행 및 검증
    - [ ] 1.4.3 오류 수정 (필요 시)
  - [x] 1.5 인증 상태 관리 훅(useAuth) 구현 (커밋 단위)
    - [ ] 1.5.1 테스트 코드 작성
    - [ ] 1.5.2 테스트 실행 및 검증
    - [ ] 1.5.3 오류 수정 (필요 시)
  - [x] 1.6 Header 컴포넌트에 로그인/로그아웃 버튼 연동 (커밋 단위)
    - [ ] 1.6.1 테스트 코드 작성
    - [ ] 1.6.2 테스트 실행 및 검증
    - [ ] 1.6.3 오류 수정 (필요 시)

- [x] 2.0 Supabase 스키마 확장 및 데이터베이스 연동 준비 (Push 단위) - [x] 2.1 확장 스키마 SQL 파일 작성 (apis, boards, comments, feedback, user_activities, wiki_edits 테이블) (커밋 단위) - [x] 2.1.1 테스트 코드 작성 - [x] 2.1.2 테스트 실행 및 검증 - [x] 2.1.3 오류 수정 (필요 시) - [x] 2.2 Supabase 콘솔에서 스키마 실행 및 적용 확인 (커밋 단위) - [x] 2.2.1 테스트 코드 작성 - [x] 2.2.2 테스트 실행 및 검증 - [x] 2.2.3 오류 수정 (필요 시) - [x] 2.3 TypeScript 타입 정의 확장 (API, Board, Comment, Feedback 등) (커밋 단위) - [x] 2.3.1 테스트 코드 작성 - [x] 2.3.2 테스트 실행 및 검증 - [x] 2.3.3 오류 수정 (필요 시) - [x] 2.4 Supabase 클라이언트 헬퍼 함수 작성 (CRUD 공통 함수) (커밋 단위) - [x] 2.4.1 테스트 코드 작성 - [x] 2.4.2 테스트 실행 및 검증 - [x] 2.4.3 오류 수정 (필요 시)
      =============================================================================
- [x] 3.0 API 등록 및 관리자 승인 시스템 구현 (Push 단위) - [x] 3.1 API 등록 폼 컴포넌트 구현 (이름, 회사, 설명, 카테고리, 가격 등 입력) (커밋 단위) - [ ] 3.1.1 테스트 코드 작성 - [ ] 3.1.2 테스트 실행 및 검증 - [ ] 3.1.3 오류 수정 (필요 시) - [x] 3.2 API 등록 제출 API 엔드포인트 구현 (/api/apis/submit) (커밋 단위) - [ ] 3.2.1 테스트 코드 작성 - [ ] 3.2.2 테스트 실행 및 검증 - [ ] 3.2.3 오류 수정 (필요 시) - [x] 3.3 관리자 페이지 레이아웃 구현 (/admin) (커밋 단위) - [ ] 3.3.1 테스트 코드 작성 - [ ] 3.3.2 테스트 실행 및 검증 - [ ] 3.3.3 오류 수정 (필요 시) - [x] 3.4 대기중인 API 목록 조회 API 구현 (/api/admin/pending-apis) (커밋 단위) - [ ] 3.4.1 테스트 코드 작성 - [ ] 3.4.2 테스트 실행 및 검증 - [ ] 3.4.3 오류 수정 (필요 시) - [x] 3.5 관리자 승인/거부 API 구현 (/api/apis/approve) (커밋 단위) - [ ] 3.5.1 테스트 코드 작성 - [ ] 3.5.2 테스트 실행 및 검증 - [ ] 3.5.3 오류 수정 (필요 시) - [x] 3.6 관리자 페이지에 승인 UI 연동 (커밋 단위) - [ ] 3.6.1 테스트 코드 작성 - [ ] 3.6.2 테스트 실행 및 검증 - [ ] 3.6.3 오류 수정 (필요 시)
      =============================================================================
- [x] 4.0 사용자 활동량 추적 및 등급 시스템 구현 (Push 단위)
  - [x] 4.1 User 테이블에 활동 점수(activity_score), 등급(grade) 컬럼 추가 (스키마 업데이트) (커밋 단위)
    - [x] 4.1.1 테스트 코드 작성
    - [x] 4.1.2 테스트 실행 및 검증
    - [x] 4.1.3 오류 수정 (필요 시)
  - [x] 4.2 활동 추적 API 구현 (/api/users/activity - 로그인, 게시글 작성, 댓글 작성 시 점수 증가) (커밋 단위)
    - [x] 4.2.1 테스트 코드 작성
    - [x] 4.2.2 테스트 실행 및 검증
    - [x] 4.2.3 오류 수정 (필요 시)
  - [x] 4.3 등급 계산 로직 구현 (브론즈/실버/골드 기준 점수) (커밋 단위)
    - [x] 4.3.1 테스트 코드 작성
    - [x] 4.3.2 테스트 실행 및 검증
    - [x] 4.3.3 오류 수정 (필요 시)
  - [x] 4.4 등급 업데이트 API 구현 (/api/users/grade - 주기적 또는 활동 시 호출) (커밋 단위)
    - [x] 4.4.1 테스트 코드 작성
    - [x] 4.4.2 테스트 실행 및 검증
    - [x] 4.4.3 오류 수정 (필요 시)
  - [x] 4.5 사용자 프로필 페이지에 등급 배지 표시 (커밋 단위)
    - [x] 4.5.1 테스트 코드 작성
    - [x] 4.5.2 테스트 실행 및 검증
    - [x] 4.5.3 오류 수정 (필요 시)

- [x] 5.0 게시판 시스템 구현 (문의/QnA/자유게시판) (Push 단위) - [x] 5.1 게시판 CRUD API 구현 (/api/boards - 생성, 조회, 수정, 삭제) (커밋 단위) - [ ] 5.1.1 테스트 코드 작성 - [ ] 5.1.2 테스트 실행 및 검증 - [ ] 5.1.3 오류 수정 (필요 시) - [x] 5.2 댓글 CRUD API 구현 (/api/comments) (커밋 단위) - [ ] 5.2.1 테스트 코드 작성 - [ ] 5.2.2 테스트 실행 및 검증 - [ ] 5.2.3 오류 수정 (필요 시) - [x] 5.3 게시판 목록 페이지 구현 (/boards) (커밋 단위) - [ ] 5.3.1 테스트 코드 작성 - [ ] 5.3.2 테스트 실행 및 검증 - [ ] 5.3.3 오류 수정 (필요 시) - [x] 5.4 게시판 타입별 페이지 구현 (/boards/[type] - inquiry, qna, free) (커밋 단위) - [ ] 5.4.1 테스트 코드 작성 - [ ] 5.4.2 테스트 실행 및 검증 - [ ] 5.4.3 오류 수정 (필요 시) - [x] 5.5 게시글 상세 페이지 구현 (/boards/[type]/[id]) (커밋 단위) - [ ] 5.5.1 테스트 코드 작성 - [ ] 5.5.2 테스트 실행 및 검증 - [ ] 5.5.3 오류 수정 (필요 시) - [x] 5.6 게시글 작성 폼 컴포넌트 구현 (커밋 단위) - [ ] 5.6.1 테스트 코드 작성 - [ ] 5.6.2 테스트 실행 및 검증 - [ ] 5.6.3 오류 수정 (필요 시) - [x] 5.7 댓글 컴포넌트 구현 (비회원도 댓글 작성 가능) (커밋 단위) - [ ] 5.7.1 테스트 코드 작성 - [ ] 5.7.2 테스트 실행 및 검증 - [ ] 5.7.3 오류 수정 (필요 시)
      =============================================================================
- [x] 6.0 피드백 수집 모달 및 저장 기능 구현 (Push 단위)
  - [x] 6.1 피드백 모달 컴포넌트 구현 (오류/기능/아이디어 선택, 내용 입력) (커밋 단위)
    - [x] 6.1.1 테스트 코드 작성
    - [x] 6.1.2 테스트 실행 및 검증
    - [x] 6.1.3 오류 수정 (필요 시)
  - [x] 6.2 피드백 저장 API 구현 (/api/feedback) (커밋 단위)
    - [x] 6.2.1 테스트 코드 작성
    - [x] 6.2.2 테스트 실행 및 검증
    - [x] 6.2.3 오류 수정 (필요 시)
  - [x] 6.3 Header 또는 Footer에 피드백 버튼 추가 (커밋 단위)
    - [x] 6.3.1 테스트 코드 작성
    - [x] 6.3.2 테스트 실행 및 검증
    - [x] 6.3.3 오류 수정 (필요 시)
  - [x] 6.4 관리자 페이지에 피드백 목록 조회 기능 추가 (커밋 단위)
    - [x] 6.4.1 테스트 코드 작성
    - [x] 6.4.2 테스트 실행 및 검증
    - [x] 6.4.3 오류 수정 (필요 시)

- [ ] 7.0 등급별 위키 문서 수정 권한 시스템 구현 (Push 단위)
  - [x] 7.1 권한 체크 유틸리티 함수 구현 (등급별 수정 가능 글자 수/비율 계산) (커밋 단위)
    - [x] 7.1.1 테스트 코드 작성
    - [x] 7.1.2 테스트 실행 및 검증
    - [x] 7.1.3 오류 수정 (필요 시)
  - [x] 7.2 위키 수정 API 구현 (/api/wiki/edit - 등급별 수정 제한 적용) (커밋 단위)
    - [x] 7.2.1 테스트 코드 작성
    - [x] 7.2.2 테스트 실행 및 검증
    - [x] 7.2.3 오류 수정 (필요 시)
  - [ ] 7.3 WikiEditor 컴포넌트 개선 (등급별 수정 가능 범위 표시, DB 연동) (커밋 단위)
    - [ ] 7.3.1 테스트 코드 작성
    - [ ] 7.3.2 테스트 실행 및 검증
    - [ ] 7.3.3 오류 수정 (필요 시)
  - [x] 7.4 위키 편집 이력 저장 기능 구현 (wiki_edits 테이블 활용) (커밋 단위)
    - [x] 7.4.1 테스트 코드 작성
    - [x] 7.4.2 테스트 실행 및 검증
    - [x] 7.4.3 오류 수정 (필요 시)
  - [x] 7.5 비회원 수정 요청 기능 구현 (수정 요청 저장 후 관리자 승인) (커밋 단위)
    - [x] 7.5.1 테스트 코드 작성
    - [x] 7.5.2 테스트 실행 및 검증
    - [x] 7.5.3 오류 수정 (필요 시)

- [ ] 8.0 Mock 데이터를 Supabase 실제 데이터로 전환 (Push 단위)
  - [ ] 8.1 mockAPIs 데이터를 Supabase apis 테이블로 마이그레이션 (스크립트 작성 및 실행) (커밋 단위)
    - [ ] 8.1.1 테스트 코드 작성
    - [ ] 8.1.2 테스트 실행 및 검증
    - [ ] 8.1.3 오류 수정 (필요 시)
  - [ ] 8.2 HomePage에서 실제 DB 데이터 조회로 변경 (커밋 단위)
    - [ ] 8.2.1 테스트 코드 작성
    - [ ] 8.2.2 테스트 실행 및 검증
    - [ ] 8.2.3 오류 수정 (필요 시)
  - [ ] 8.3 ExplorePage에서 실제 DB 데이터 조회 및 필터링으로 변경 (커밋 단위)
    - [ ] 8.3.1 테스트 코드 작성
    - [ ] 8.3.2 테스트 실행 및 검증
    - [ ] 8.3.3 오류 수정 (필요 시)
  - [ ] 8.4 APIDetailPage에서 실제 DB 데이터 조회로 변경 (커밋 단위)
    - [ ] 8.4.1 테스트 코드 작성
    - [ ] 8.4.2 테스트 실행 및 검증
    - [ ] 8.4.3 오류 수정 (필요 시)
  - [ ] 8.5 mockData.ts 파일 제거 또는 아카이빙 (커밋 단위)
    - [ ] 8.5.1 테스트 코드 작성
    - [ ] 8.5.2 테스트 실행 및 검증
    - [ ] 8.5.3 오류 수정 (필요 시)
  - [ ] 8.6 전체 페이지 통합 테스트 및 버그 수정 (커밋 단위)
    - [ ] 8.6.1 테스트 코드 작성
    - [ ] 8.6.2 테스트 실행 및 검증
    - [ ] 8.6.3 오류 수정 (필요 시)
