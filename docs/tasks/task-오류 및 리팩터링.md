# 오류 수정 및 리팩터링 작업 목록

## 관련 파일

### Critical Errors (우선순위: 높음)

- `src/app/explore/page.tsx` - 탐색 페이지 메인 컴포넌트 (구문 오류 수정)
- `src/lib/apiService.ts` - API 데이터 조회 서비스
- `prisma/schema.prisma` - 데이터베이스 스키마 정의
- `.env.local` - 환경 변수 설정 파일
- `src/app/api/[id]/page.tsx` - API 상세 페이지 (전체 리팩터링)
- `src/components/APIDetailClient.tsx` - API 상세 클라이언트 컴포넌트 (신규)

### Code Quality Issues (우선순위: 중간)

- `src/lib/validations/api.ts` - API 요청 검증 스키마 (신규)
- `src/lib/validations/board.ts` - 게시판 요청 검증 스키마 (신규)
- `src/lib/queryBuilder.ts` - 통합 쿼리 빌더 (신규)
- `src/app/api/apis/submit/route.ts` - API 등록 라우트
- `src/app/api/boards/route.ts` - 게시판 라우트
- `src/components/APIRegistrationForm.tsx` - API 등록 폼
- `src/components/BoardForm.tsx` - 게시판 작성 폼

### Refactoring Tasks (우선순위: 낮음)

- `src/lib/logger.ts` - 통합 로깅 유틸리티 (신규)
- `src/components/explore/FilterSidebar.tsx` - 필터 사이드바 컴포넌트 (신규)
- `src/components/explore/APIGrid.tsx` - API 그리드 컴포넌트 (신규)
- `src/components/explore/SearchHeader.tsx` - 검색 헤더 컴포넌트 (신규)
- `src/hooks/useAPIFilters.ts` - 필터링 커스텀 훅 (신규)
- `src/hooks/useInfiniteScroll.ts` - 무한 스크롤 커스텀 훅 (신규)

---

## 작업

- [ ] 1.0 Critical 오류 수정 - explore 페이지 및 데이터베이스 (Push 단위)
  - [ ] 1.1 explore/page.tsx 구문 오류 수정 (커밋 단위)
    - [ ] 1.1.1 파일 시작/끝의 마크다운 코드 블록 제거
    - [ ] 1.1.2 useRef, useCallback import 추가
    - [ ] 1.1.3 중복 export 제거 및 Suspense wrapper 정리
    - [ ] 1.1.4 테스트 코드 작성 (페이지 렌더링 확인)
    - [ ] 1.1.5 테스트 실행 및 검증
    - [ ] 1.1.6 오류 수정 (필요 시)
  - [ ] 1.2 데이터베이스 스키마 컬럼명 통일 (커밋 단위)
    - [ ] 1.2.1 Prisma 스키마에서 snake_case로 컬럼명 변경
      - [ ] 1.2.1.1 createdAt → created_at 변경
      - [ ] 1.2.1.2 updatedAt → updated_at 변경
      - [ ] 1.2.1.3 viewsLast7Days → views_last_7_days 변경
      - [ ] 1.2.1.4 테스트 코드 작성
      - [ ] 1.2.1.5 테스트 실행 및 검증
      - [ ] 1.2.1.6 오류 수정 (필요 시)
    - [ ] 1.2.2 Prisma migration 생성 및 적용
      - [ ] 1.2.2.1 테스트 코드 작성
      - [ ] 1.2.2.2 테스트 실행 및 검증
      - [ ] 1.2.2.3 오류 수정 (필요 시)
  - [ ] 1.3 타입 정의 및 API 서비스 코드 업데이트 (커밋 단위)
    - [ ] 1.3.1 src/types/index.ts에서 API 인터페이스 필드명 업데이트
    - [ ] 1.3.2 src/lib/apiService.ts의 쿼리 필드명 수정
    - [ ] 1.3.3 src/data/mockData.ts의 필드명 수정
    - [ ] 1.3.4 테스트 코드 작성 (API 조회 확인)
    - [ ] 1.3.5 테스트 실행 및 검증
    - [ ] 1.3.6 오류 수정 (필요 시)

- [ ] 2.0 Critical 오류 수정 - API 상세 페이지 및 환경 설정 (Push 단위)
  - [ ] 2.1 환경 변수 설정 추가 (커밋 단위)
    - [ ] 2.1.1 .env.local에 NEXTAUTH_URL 추가
    - [ ] 2.1.2 .env.local에 NEXTAUTH_SECRET 생성 및 추가
    - [ ] 2.1.3 .env.example 파일 업데이트
    - [ ] 2.1.4 테스트 코드 작성 (환경 변수 로드 확인)
    - [ ] 2.1.5 테스트 실행 및 검증
    - [ ] 2.1.6 오류 수정 (필요 시)
  - [ ] 2.2 API 상세 페이지 Server Component로 재작성 (커밋 단위)
    - [ ] 2.2.1 src/app/api/[id]/page.tsx 마크다운 제거 및 기본 구조 작성
      - [ ] 2.2.1.1 테스트 코드 작성
      - [ ] 2.2.1.2 테스트 실행 및 검증
      - [ ] 2.2.1.3 오류 수정 (필요 시)
    - [ ] 2.2.2 서버 사이드 데이터 페칭 구현
      - [ ] 2.2.2.1 테스트 코드 작성
      - [ ] 2.2.2.2 테스트 실행 및 검증
      - [ ] 2.2.2.3 오류 수정 (필요 시)
    - [ ] 2.2.3 notFound 핸들링 추가
      - [ ] 2.2.3.1 테스트 코드 작성
      - [ ] 2.2.3.2 테스트 실행 및 검증
      - [ ] 2.2.3.3 오류 수정 (필요 시)
  - [ ] 2.3 APIDetailClient 컴포넌트 생성 (커밋 단위)
    - [ ] 2.3.1 src/components/APIDetailClient.tsx 파일 생성
      - [ ] 2.3.1.1 테스트 코드 작성
      - [ ] 2.3.1.2 테스트 실행 및 검증
      - [ ] 2.3.1.3 오류 수정 (필요 시)
    - [ ] 2.3.2 탭, 버튼 등 interactive UI 구현
      - [ ] 2.3.2.1 테스트 코드 작성
      - [ ] 2.3.2.2 테스트 실행 및 검증
      - [ ] 2.3.2.3 오류 수정 (필요 시)
    - [ ] 2.3.3 WikiEditor 통합
      - [ ] 2.3.3.1 테스트 코드 작성
      - [ ] 2.3.3.2 테스트 실행 및 검증
      - [ ] 2.3.3.3 오류 수정 (필요 시)

- [ ] 3.0 보안 검증 레이어 구현 (Push 단위)
  - [ ] 3.1 Zod 패키지 설치 및 검증 스키마 생성 (커밋 단위)
    - [ ] 3.1.1 zod 패키지 설치
    - [ ] 3.1.2 src/lib/validations/api.ts 파일 생성 및 API 검증 스키마 작성
    - [ ] 3.1.3 src/lib/validations/board.ts 파일 생성 및 게시판 검증 스키마 작성
    - [ ] 3.1.4 테스트 코드 작성 (스키마 검증 테스트)
    - [ ] 3.1.5 테스트 실행 및 검증
    - [ ] 3.1.6 오류 수정 (필요 시)
  - [ ] 3.2 API 등록 라우트에 서버 검증 추가 (커밋 단위)
    - [ ] 3.2.1 src/app/api/apis/submit/route.ts에 Zod 검증 추가
    - [ ] 3.2.2 에러 핸들링 개선 (ZodError 처리)
    - [ ] 3.2.3 테스트 코드 작성 (검증 실패 케이스 포함)
    - [ ] 3.2.4 테스트 실행 및 검증
    - [ ] 3.2.5 오류 수정 (필요 시)
  - [ ] 3.3 게시판 라우트에 서버 검증 추가 (커밋 단위)
    - [ ] 3.3.1 src/app/api/boards/route.ts에 Zod 검증 추가
    - [ ] 3.3.2 댓글 라우트에도 검증 추가
    - [ ] 3.3.3 테스트 코드 작성
    - [ ] 3.3.4 테스트 실행 및 검증
    - [ ] 3.3.5 오류 수정 (필요 시)
  - [ ] 3.4 클라이언트 폼 컴포넌트 에러 메시지 연동 (커밋 단위)
    - [ ] 3.4.1 APIRegistrationForm에서 서버 검증 에러 표시
    - [ ] 3.4.2 BoardForm에서 서버 검증 에러 표시
    - [ ] 3.4.3 테스트 코드 작성 (UI 에러 표시 확인)
    - [ ] 3.4.4 테스트 실행 및 검증
    - [ ] 3.4.5 오류 수정 (필요 시)

- [ ] 4.0 코드 중복 제거 및 쿼리 최적화 (Push 단위)
  - [ ] 4.1 통합 쿼리 빌더 클래스 생성 (커밋 단위)
    - [ ] 4.1.1 src/lib/queryBuilder.ts 파일 생성
    - [ ] 4.1.2 APIQueryBuilder 클래스 구현
      - [ ] 4.1.2.1 기본 쿼리 메서드 (approved, limit, orderBy 등)
      - [ ] 4.1.2.2 필터 메서드 (byCategory, byPrice, byRating)
      - [ ] 4.1.2.3 검색 메서드 (search)
      - [ ] 4.1.2.4 execute 메서드
      - [ ] 4.1.2.5 테스트 코드 작성
      - [ ] 4.1.2.6 테스트 실행 및 검증
      - [ ] 4.1.2.7 오류 수정 (필요 시)
  - [ ] 4.2 apiService.ts 리팩터링 (커밋 단위)
    - [ ] 4.2.1 getPopularAPIs를 쿼리 빌더로 전환
    - [ ] 4.2.2 getApprovedAPIs를 쿼리 빌더로 전환
    - [ ] 4.2.3 searchAPIs를 쿼리 빌더로 전환
    - [ ] 4.2.4 중복 에러 핸들링 로직 제거
    - [ ] 4.2.5 테스트 코드 작성
    - [ ] 4.2.6 테스트 실행 및 검증
    - [ ] 4.2.7 오류 수정 (필요 시)
  - [ ] 4.3 홈페이지 데이터 페칭 병렬화 (커밋 단위)
    - [ ] 4.3.1 src/app/page.tsx에서 Promise.all로 변경
    - [ ] 4.3.2 로딩 상태 처리 개선
    - [ ] 4.3.3 테스트 코드 작성 (성능 측정 포함)
    - [ ] 4.3.4 테스트 실행 및 검증
    - [ ] 4.3.5 오류 수정 (필요 시)

- [ ] 5.0 로깅 시스템 통합 및 TypeScript 개선 (Push 단위)
  - [ ] 5.1 통합 로거 유틸리티 생성 (커밋 단위)
    - [ ] 5.1.1 src/lib/logger.ts 파일 생성
    - [ ] 5.1.2 LogLevel 타입 및 LogContext 인터페이스 정의
    - [ ] 5.1.3 info, warn, error, debug 메서드 구현
    - [ ] 5.1.4 테스트 코드 작성
    - [ ] 5.1.5 테스트 실행 및 검증
    - [ ] 5.1.6 오류 수정 (필요 시)
  - [ ] 5.2 기존 console.log를 logger로 전환 (커밋 단위)
    - [ ] 5.2.1 API 라우트 파일들 업데이트 (10개 파일)
      - [ ] 5.2.1.1 테스트 코드 작성
      - [ ] 5.2.1.2 테스트 실행 및 검증
      - [ ] 5.2.1.3 오류 수정 (필요 시)
    - [ ] 5.2.2 서비스 레이어 파일들 업데이트 (5개 파일)
      - [ ] 5.2.2.1 테스트 코드 작성
      - [ ] 5.2.2.2 테스트 실행 및 검증
      - [ ] 5.2.2.3 오류 수정 (필요 시)
    - [ ] 5.2.3 컴포넌트 파일들 업데이트 (필요한 경우만)
      - [ ] 5.2.3.1 테스트 코드 작성
      - [ ] 5.2.3.2 테스트 실행 및 검증
      - [ ] 5.2.3.3 오류 수정 (필요 시)
  - [ ] 5.3 TypeScript @ts-ignore 제거 및 타입 가드 추가 (커밋 단위)
    - [ ] 5.3.1 src/data/mockData.ts의 @ts-ignore 제거
      - [ ] 5.3.1.1 hasCountries 타입 가드 함수 생성
      - [ ] 5.3.1.2 hasAuthMethods 타입 가드 함수 생성
      - [ ] 5.3.1.3 타입 단언을 타입 가드로 변경
      - [ ] 5.3.1.4 테스트 코드 작성
      - [ ] 5.3.1.5 테스트 실행 및 검증
      - [ ] 5.3.1.6 오류 수정 (필요 시)
    - [ ] 5.3.2 src/types/index.ts에 Utility 타입 추가
      - [ ] 5.3.2.1 테스트 코드 작성
      - [ ] 5.3.2.2 테스트 실행 및 검증
      - [ ] 5.3.2.3 오류 수정 (필요 시)

- [ ] 6.0 Explore 페이지 컴포넌트 분리 및 성능 최적화 (Push 단위)
  - [ ] 6.1 필터 관련 커스텀 훅 생성 (커밋 단위)
    - [ ] 6.1.1 src/hooks/useAPIFilters.ts 파일 생성
    - [ ] 6.1.2 필터 상태 관리 로직 추출
    - [ ] 6.1.3 필터 토글 함수들 구현
    - [ ] 6.1.4 테스트 코드 작성
    - [ ] 6.1.5 테스트 실행 및 검증
    - [ ] 6.1.6 오류 수정 (필요 시)
  - [ ] 6.2 무한 스크롤 커스텀 훅 생성 (커밋 단위)
    - [ ] 6.2.1 src/hooks/useInfiniteScroll.ts 파일 생성
    - [ ] 6.2.2 Intersection Observer 로직 추출
    - [ ] 6.2.3 페이지네이션 로직 구현
    - [ ] 6.2.4 테스트 코드 작성
    - [ ] 6.2.5 테스트 실행 및 검증
    - [ ] 6.2.6 오류 수정 (필요 시)
  - [ ] 6.3 FilterSidebar 컴포넌트 분리 (커밋 단위)
    - [ ] 6.3.1 src/components/explore/FilterSidebar.tsx 생성
    - [ ] 6.3.2 필터 UI 코드 이동
    - [ ] 6.3.3 Props 인터페이스 정의
    - [ ] 6.3.4 테스트 코드 작성
    - [ ] 6.3.5 테스트 실행 및 검증
    - [ ] 6.3.6 오류 수정 (필요 시)
  - [ ] 6.4 SearchHeader 컴포넌트 분리 (커밋 단위)
    - [ ] 6.4.1 src/components/explore/SearchHeader.tsx 생성
    - [ ] 6.4.2 검색바 및 정렬 UI 코드 이동
    - [ ] 6.4.3 Props 인터페이스 정의
    - [ ] 6.4.4 테스트 코드 작성
    - [ ] 6.4.5 테스트 실행 및 검증
    - [ ] 6.4.6 오류 수정 (필요 시)
  - [ ] 6.5 APIGrid 컴포넌트 분리 (커밋 단위)
    - [ ] 6.5.1 src/components/explore/APIGrid.tsx 생성
    - [ ] 6.5.2 그리드 렌더링 로직 이동
    - [ ] 6.5.3 Props 인터페이스 정의
    - [ ] 6.5.4 테스트 코드 작성
    - [ ] 6.5.5 테스트 실행 및 검증
    - [ ] 6.5.6 오류 수정 (필요 시)
  - [ ] 6.6 explore/page.tsx 통합 및 정리 (커밋 단위)
    - [ ] 6.6.1 분리된 컴포넌트들 import
    - [ ] 6.6.2 메인 페이지 로직을 100줄 이하로 축소
    - [ ] 6.6.3 불필요한 코드 제거
    - [ ] 6.6.4 테스트 코드 작성 (전체 페이지 통합 테스트)
    - [ ] 6.6.5 테스트 실행 및 검증
    - [ ] 6.6.6 오류 수정 (필요 시)
